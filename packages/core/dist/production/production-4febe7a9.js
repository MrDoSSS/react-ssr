"use strict";var e=require("./register-939ee7cc.js"),r=require("path"),t=require("fs-extra");require("react"),require("slash"),require("lz-string"),require("urlsafe-base64");var s=require("fs");require("recursive-readdir");var n=require("./helpers-913307b0.js"),i=require("memory-fs"),u=require("webpack");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("webpack-merge"),require("mini-css-extract-plugin"),require("optimize-css-assets-webpack-plugin"),require("terser-webpack-plugin");var c=a(r),o=a(t),f=a(s),d=a(i),l=a(u),p=process.cwd(),g=require("unionfs").ufs,q=new d.default;g.use(f.default).use(q);var v=function(){var r=e.asyncToGenerator(e.regenerator.mark((function r(t){var s,i,u,a,d,v;return e.regenerator.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o.default.removeSync(c.default.join(p,e.ssrConfig.distDir)),r.next=3,n.getEntry(q);case 3:return s=r.sent,i=n.slicedToArray(s,2),u=i[0],a=i[1],d=n.configureWebpack(u),(v=l.default(d)).inputFileSystem=g,r.next=12,new n.promise((function(r,s){v.run((function(n,i){n&&s(n.stack||n),i.hasErrors()&&s(i.toString());for(var u=function(r){var s=a[r],n=e.getPageId(s,"_");t.use("/_react-ssr/".concat(n,".css"),(function(r,t){var s=c.default.join(p,e.ssrConfig.distDir,"".concat(n,".css")),i=e.existsSync(s)?f.default.readFileSync(s).toString():"";t.writeHead(200,{"Content-Type":"text/css"}),t.end(i,"utf-8")})),t.use("/_react-ssr/".concat(n,".js"),(function(r,t){var s=c.default.join(p,e.ssrConfig.distDir,"".concat(n,".js")),i=f.default.readFileSync(s).toString();t.status(200).type(".js").send(i)}))},o=0;o<a.length;o++)u(o);r()}))}));case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();exports.default=v;
