"use strict";var e=require("./register-939ee7cc.js"),r=require("path"),t=require("fs-extra");require("react"),require("slash"),require("lz-string"),require("urlsafe-base64");var s=require("fs");require("recursive-readdir");var n=require("./helpers-913307b0.js"),i=require("memory-fs"),a=require("webpack");require("webpack-merge"),require("mini-css-extract-plugin"),require("optimize-css-assets-webpack-plugin"),require("terser-webpack-plugin");var u=require("http-proxy-middleware"),c=require("webpack-dev-server");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var f=o(r),l=o(t),d=o(s),p=o(i),g=o(a),v=o(c),q=process.cwd(),y=require("unionfs").ufs,w=new p.default;y.use(d.default).use(w);var j=function(){var r=e.asyncToGenerator(e.regenerator.mark((function r(t){var s,i,a,c,o,d;return e.regenerator.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l.default.removeSync(f.default.join(q,e.ssrConfig.distDir)),r.next=3,n.getEntry(w);case 3:return s=r.sent,i=n.slicedToArray(s,2),a=i[0],c=i[1],o=n.configureWebpack(a),(d=g.default(o)).inputFileSystem=y,8888,r.next=13,new n.promise((function(r,s){new v.default(d,{hotOnly:!0,noInfo:!0,stats:"errors-only",overlay:!1,compress:!1,serveIndex:!1,after:function(r,t,s){for(var n=s.outputFileSystem,i=function(t){var s=c[t],i=e.getPageId(s,"_");r.get("/_react-ssr/".concat(i,".css"),(function(r,t){var s=f.default.join(q,e.ssrConfig.distDir,"".concat(i,".css")),a=n.existsSync(s)?n.readFileSync(s).toString():"";t.writeHead(200,{"Content-Type":"text/css"}),t.end(a,"utf-8")})),r.get("/_react-ssr/".concat(i,".js"),(function(r,t){var s=f.default.join(q,e.ssrConfig.distDir,"".concat(i,".js")),a=n.readFileSync(s).toString();t.status(200).type(".js").send(a)}))},a=0;a<c.length;a++)i(a)}}).listen(8888,(function(e){s(e)}));var n=u.createProxyMiddleware({target:"http://localhost:".concat(8888),changeOrigin:!0,ws:!0,logLevel:"error"});t.use("/*.css",n),t.use("/*.js",n),t.use("/*.json",n),t.use("/sockjs-node*",n),r()}));case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();exports.default=j;
